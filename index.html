<!DOCTYPE html>
<html lang="en-US">

  <head>
<title>Scotch Landscape</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="description" content="Scotch Landscape"/>
<meta name="author" content="Michael McCourt"/>

<link rel="stylesheet" type="text/css"
      href="css/screen.css"
      media="screen"/>

<link rel="stylesheet" type="text/css"
      href="css/print.css"
      media="print"/>

<link rel="stylesheet" type="text/css"
      href="css/syntax.css"/>

<link href="http://cdn.pydata.org/bokeh/release/bokeh-0.12.9.min.css"
      rel="stylesheet" type="text/css">

<script src="http://cdn.pydata.org/bokeh/release/bokeh-0.12.9.min.js"></script>

</head>

<body>
<div id="content">

<h1 class="title">Scotch Landscape</h1>
  
  <p>
  (If you&rsquo;d rather just skip to the result, you can
  go <a href="./scotch-plot.html">here</a>.  Alternatively, if
  you&rsquo;re super-interested and would like to see my source code,
  you can find on github
  it <a href="https://github.com/mkmcc/ScotchLandscape">here</a>.)
  </p>

<div class="section" id="section1">
  <h2>Introduction</h2>

  <p>
  If you&rsquo;ve ever met a craft beer enthusiast, you probably know
  that beer can be <i>very complicated</i>: there are different malts,
  hops, and styles to choose from, and there are also strong opinions
  to accompany each choice&hellip; it can take a bit of experimenting
  to learn your preferences.  (Not that anyone is complaining!)
  </p>

  <p>
  Scotch whisky is essentially distilled beer, and distillation only
  adds to the layers of complexity: connoisseurs describe scotches
  with a language every bit as thorough and every bit as inscrutable
  as the language used to describe red wines.  This makes it a bit of
  a challenge to break into the scotch world and to learn what you
  like &mdash; especially since a bottle of scotch lasts a long time
  and mistakes can be expensive!
  </p>

  <p>
  I&rsquo;ve attempted to help by downloading scotch reviews from the 
  <a href="https://www.reddit.com/r/Scotch/">Scotch SubReddit</a> and
  distilling the information into something you can use to explore and
  compare scotches at a glance.
  </p>

  <p>
  I took the 200 most reviewed scotches, and for each of them
  downloaded ten reviews from Reddit&rsquo;s most prolific reviewers.
  Then, for each scotch I count up the number of words in different
  note categories like the following:
  </p>

  <p>
  <table>
  <tr valign="top">
    <th align="left">honey</th>
    <td>honey honeyed honeysuckle baklava</td>
  </tr>

  <tr valign="top">
    <th align="left">raisin</th>
    <td>grape grapes grapey sultanas sultana raisin raisins date dates
      fig figgy figs prune prunes</td>
  </tr>

  <tr valign="top">
    <th align="left">beer</th>
    <td>malt malty maltier maltiest barley beer wheat wheated
      sourdough bread bready cracker crackers hops oatmeal pastry
      popcorn porridge toast toasted cereal</td>
  </tr>

  <tr valign="top">
    <th align="left">hay</th>
    <td>hay grass grassiness grassy straw</td>
  </tr>

  <tr valign="top">
    <th align="left">bakery</th>
    <td>graham shortbread cookie cookies cake muffin biscuit biscuits
      baked bakery</td>
  </tr>

  <tr valign="top">
    <th align="left">sea</th>
    <td>marine maritime fish kelp seashells sea seashore seawater
      seaweed ocean oceany salmon</td>
  </tr>

  <tr valign="top">
    <th align="left">&hellip;</th>
    <td></td>
  </tr>
  </table>
  </p>

  <p>
  For each scotch, this tally represents a sort of
  &ldquo;fingerprint&rdquo; for the traits defining that scotch.  We
  can run a few machine-learning algorithms on these fingerprints and
  see what patterns we can tease out from all these reviews:
  </p>

  <h3>KMeans Cluster Analysis:</h3>

  <p>
  After tallying each of these traits for each scotch, the simplest
  thing I can do is to run a KMeans analysis to look for clusters
  &mdash; each cluster should contain a number of scotches with
  similar traits.  The KMeans algorithm won&rsquo;t actually identify
  the <i>number</i> of clusters&hellip; that&rsquo;s a bit arbitrary,
  and must be specified by hand.  I&rsquo;ll try looking for (say)
  nine distinct clusters:
  </p>

  <p>
  <table>
    <tr> <th> group 1: </th> <td>  wine, sugar, vanilla, fruit, sherry </td> </tr>
    <tr> <th> group 2: </th> <td>  sherry, sugar, oak, fruit, spice    </td> </tr>
    <tr> <th> group 3: </th> <td>  peat, sugar, smoke, vanilla, salt   </td> </tr>
    <tr> <th> group 4: </th> <td>  oak, vanilla, sherry, apple, fruit  </td> </tr>
    <tr> <th> group 5: </th> <td>  vanilla, peat, smoke, salt, sugar   </td> </tr>
    <tr> <th> group 6: </th> <td>  sherry, vanilla, oak, sugar, fruit  </td> </tr>
    <tr> <th> group 7: </th> <td>  vanilla, sugar, apple, oak, honey   </td> </tr>
    <tr> <th> group 8: </th> <td>  sherry, peat, sugar, smoke, vanilla </td> </tr>
    <tr> <th> group 9: </th> <td>  vanilla, easy, honey, citrus, beer  </td> </tr>
  </table>
  </p>

  <p>
  You might use this to, e.g., take a scotch you know you like, and
  then find other scotches from the same group.  Unfortunately, the
  meaning of these groups isn&rsquo;t especially illuminating, at
  least not to me.  So I&rsquo;ll try to get the computer to do more
  of the interpretation for me&hellip; a good choice for this scenario
  is the <i>principal component analysis</i>.
  </p>

</div> <!-- end section 1 -->


<div class="section" id="section2">
  <h2>Principal Component Analysis</h2>

  <p>
  The principal component analysis attempts to identify the most
  salient qualities separating the different types of scotches.
  </p>

  <p>
  Here is a scatter plot showing the various principal components for
  each scotch, colored by the region of origin.  You can see that the
  principal components 1 and 2 separate the regions quite well, with
  the smoky Islay scotches in one bunch toward the lower-left and the
  lighter Speyside scotches all on the other side.  In terms
  of <i>interpretation</i>, neither PC1 or PC2 seem likely to be
  all-that helpful, but a line cutting across the diagonal of this
  plot seems promising!
  </p>

  <p>
  You can also see that the third principal component adds essentially
  no distinguishing power, at least for traits which correlate with
  the scotch&rsquo;s region of origin.
  </p>

  <p>
  <img src="static/pca-by-region.png"></img>
  </p>

  <p>
  We can also see how these principal components segregate the
  different Kmeans clusters.  Again, PC1 and PC2 do a reasonably good
  job of segregating the different clusters.
  </p>

  <p>
  <img src="static/pca-by-kmeans.png"></img>
  </p>


  <div id="pca-table">
  <h3>Here are the principal components:</h3>

  <p>
  Great, so there exists <i>some</i> set of characteristics which
  separate the various scotches, but what are they?
  </p>

  <p>
    <table style="float: left; margin-right: 6em;">
    <tr><td colspan="2">PC1: <i>30% of variation:</td></tr>
    <tr><th>importance</th> <th>trait</th></tr>
    <tr><td> 0.71 </td> <td> sherry  </td></tr>
    <tr><td> 0.09 </td> <td> raisin  </td></tr>
    <tr><td> 0.08 </td> <td> oak     </td></tr>
    <tr><td> 0.07 </td> <td> spice   </td></tr>
    <tr><td> 0.07 </td> <td> berry   </td></tr>
    <tr><td>-0.13 </td> <td> salt    </td></tr>
    <tr><td>-0.16 </td> <td> smoke   </td></tr>
    <tr><td>-0.19 </td> <td> vanilla </td></tr>
    <tr><td>-0.29 </td> <td> peat    </td></tr>
    </table>

    <table style="float: left; margin-right: 6em;">
    <tr><td colspan="2">PC2: <i>16% of variation:</td></tr>
    <tr><th>importance</th> <th>trait</th></tr>
    <tr><td> 0.39 </td> <td> vanilla   </td></tr>
    <tr><td> 0.34 </td> <td> oak       </td></tr>
    <tr><td> 0.28 </td> <td> apple     </td></tr>
    <tr><td> 0.27 </td> <td> honey     </td></tr>
    <tr><td> 0.16 </td> <td> easy      </td></tr>
    <tr><td>-0.16 </td> <td> salt      </td></tr>
    <tr><td>-0.18 </td> <td> medicinal </td></tr>
    <tr><td>-0.27 </td> <td> sherry    </td></tr>
    <tr><td>-0.35 </td> <td> smoke     </td></tr>
    <tr><td>-0.61 </td> <td> peat      </td></tr>
    </table>
  
    <table style="float: left">
    <tr><td colspan="2">PC3: <i>6% of variation:</td></tr>
    <tr><th>importance</th> <th>trait</th></tr>
    <tr><td> 0.56 </td> <td> wine      </td></tr>
    <tr><td> 0.21 </td> <td> oak       </td></tr>
    <tr><td> 0.17 </td> <td> fruit     </td></tr>
    <tr><td> 0.15 </td> <td> berry     </td></tr>
    <tr><td> 0.12 </td> <td> cocoa     </td></tr>
    <tr><td>-0.11 </td> <td> honey     </td></tr>
    <tr><td>-0.12 </td> <td> medicinal </td></tr>
    <tr><td>-0.12 </td> <td> easy      </td></tr>
    <tr><td>-0.27 </td> <td> sherry    </td></tr>
    <tr><td>-0.44 </td> <td> vanilla   </td></tr>
    </table>
  </p>
  </div> <!-- end pca-table -->


  <div style="clear: left;">
    <br/>

    <p>
    One pretty clear division in the principal components above is a
    distinction between words like <i>sherry</i>, <i>grape (and
    related)</i>, and <i>fruit (or related)</i> vs. words
    like <i>vanilla</i>, <i>caramel</i>, and <i>butter (or
    related)</i>.  I take this to be a distinction between scotches
    aged in French oak (which is high in tannins, and often previously
    held sherry or wine) vs. those aged in casks made from American
    oak (which is comparatively high in vanillin and other flavor
    molecules found in coconut, stonefruit, and cloves).
    </p>

    <p>
    Another clear division is between peated scotches, with words
    like <i>smoke</i> and <i>peat</i> vs. unpeated scotches, described
    with words like <i>apple</i>, <i>honey</i>, and <i>heather</i>.
    </p>

    <p>
    Recall that the spectrum of scotches (at least by region) seemed
    to spread across a diagonal in the plot of PC1 vs PC2.  Since no
    single principal component clearly separated the different scotch
    regions, based on this intuition I&rsquo;ll define my own set of
    components to use:
    </p>

    <h3>Here are my &ldquo;modified&rdquo; principal components:</h3>

    <p>
        0.74 &times; &lsquo;sherry&rsquo;
      + 0.10 &times; &lsquo;raisin&rsquo;
      + 0.07 &times; &lsquo;berry&rsquo;
      + 0.07 &times; &lsquo;spice&rsquo;
      - 0.18 &times; &lsquo;vanilla&rsquo;
      - 0.18 &times; &lsquo;caramel&rsquo;
    </p>

    <p>
        0.64 &times; &lsquo;peat&rsquo;
      + 0.41 &times; &lsquo;smoke&rsquo;
      - 0.27 &times; &lsquo;apple&rsquo;
      - 0.28 &times; &lsquo;honey&rsquo;
      - 0.28 &times; &lsquo;heather&rsquo;
    </p>
  </div>


</div> <!-- end section 2 -->

    
<div class="section" id="section3">
  <h2>Results</h2>

  <p>
  Finally, here's the plot, colored by the Kmeans cluster.  Mouse
  over to see the scotch name, price, and average rating.
  </p>
    
  <!-- autoloading script for the plot -->
  <script
    src="static/scotch-plot.js"
    id="360180b8-4301-4a7e-b4b4-78b833a1ceea"
    data-bokeh-model-id="a2b84b77-3d5a-4467-bf5d-eaf56cfe2b1a"
    data-bokeh-doc-id="6cc89c7d-f95c-42f8-b720-cdc7c83684f2"
    ></script>
    
  <div class="bk-root">
    <!-- this id matters, and will likely change with every
         iteration of the plot... the only way i know to find it
         is to look at the errors in the javascipt console... -->
    <div class="bk-plotdiv"
         id="360180b8-4301-4a7e-b4b4-78b833a1ceea">
    </div>
  </div> <!-- end plot -->

  <br/>

  <p>
  So there you have it.  This analysis is not mathematically rigorous,
  and it relies on a few subjective guesses.  Unfortunately, I&rsquo;m
  a total scotch-novice and cannot guarantee my guesses are accurate.
  However, I do think the results stand to reason&hellip; for example,
  the <i>Balvenie 12 Doublewood</i>, which is unpeated and aged in
  both American and French oak, appears roughly halway up the right
  side of the plot.  And the <i>Laphroaig 10</i>, which is heavily
  peated and aged only in American oak, appears in the lower-left
  corner.
  </p>

  <p>
  I hope you find these results helpful, and please let me know if you
  think I&rsquo;ve erred!
  </p>

  <!--
  <p>
  Assuming my conclusion that scotches are primarily divided between
  French vs. American oak and between peated vs unpeated, one could
  presumably redo this analysis with a set of more targeted traits.
  This should yield a more accurate result, but of course
  there&rsquo;s the danger of getting out the answer you put in!
  </p>
  -->

</div> <!-- end section 3 -->

</div> <!-- end content -->

<div id="postamble">
<p class="author">&copy; 2017 Michael McCourt</p>
<p class="date">last modified: November 2017</p>
<p class="validation">
     <a href="http://validator.w3.org/check?uri=referer">
       <img src="http://www.w3.org/Icons/valid-html40-blue.png"
            alt="Valid HTML 4.0 Strict" height="31" width="88" />
     </a>
     <a href="http://jigsaw.w3.org/css-validator/check?uri=referer">
       <img style="border:0; width:88px; height:31px"
            src="http://jigsaw.w3.org/css-validator/images/vcss"
            alt="Valid CSS" />
     </a>
   </p>

</div>

</body>
</html>

<!--

to view:
python -m SimpleHTTPServer
http://127.0.0.1:8000/test.html 

 -->
